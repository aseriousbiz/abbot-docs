<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Abbot Templating Language | Abbot Docs </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Abbot Templating Language | Abbot Docs ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Bungee+Hairline&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../templates/abbot/css/abbot.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <span class="navbar-brand abbot-logo">
                <a href="https://ab.bot/">
                <svg id="logo-light" width="77" height="14" viewbox="0 0 33 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4.46029 2.49502L3.78048 0.93825C3.69435 0.735062 3.59899 0.558767 3.49441 0.421317C3.3929 0.280879 3.1868 0.113548 2.78691 0.113548H1.82411C1.41807 0.113548 1.20889 0.277891 1.10431 0.415341C0.996645 0.558767 0.901287 0.732074 0.818233 0.935261L0.184564 2.50996C0.126119 2.66235 0.0799776 2.82371 0.049217 2.99104C0.0153803 3.15837 0 3.34363 0 3.54084V5.87749H0.713647V4.23407H3.93736V5.87749H4.65101V3.54084C4.65101 3.34363 4.63255 3.15837 4.60179 2.99104C4.56795 2.82968 4.52489 2.66534 4.46029 2.49502ZM1.82411 0.806775H2.78999C2.84228 0.806775 2.90688 0.812751 2.93149 0.84562C2.99916 0.941237 3.06376 1.06076 3.12836 1.21016L3.79894 2.74901C3.83893 2.86255 3.87276 2.98805 3.90045 3.11952C3.92506 3.24502 3.93736 3.38546 3.93736 3.53785H0.713647C0.713647 3.38546 0.725951 3.24502 0.750559 3.11952C0.778244 2.98805 0.812081 2.86255 0.848993 2.76096L1.47959 1.19522C1.53496 1.05777 1.59955 0.941237 1.66415 0.84562C1.67953 0.821716 1.74105 0.806775 1.82411 0.806775Z" fill="#ffffff"></path>
                  <path d="M11.6309 3.02091C11.5109 2.89243 11.3448 2.79083 11.1418 2.71912C11.1479 2.70717 11.1541 2.69522 11.1602 2.68028C11.2433 2.48605 11.2863 2.26793 11.2863 2.03785V1.42828C11.2863 1.26095 11.2648 1.10558 11.2279 0.959161C11.1818 0.788842 11.0925 0.636452 10.9664 0.507966C10.8403 0.37948 10.665 0.280874 10.4466 0.212149C10.2405 0.146412 9.99439 0.116531 9.69294 0.116531H7.38281V5.87749H10.3389C10.6465 5.87749 10.8926 5.8506 11.0925 5.79382C11.3109 5.73406 11.4863 5.64143 11.6093 5.52789C11.7385 5.40836 11.8277 5.25896 11.8769 5.08864C11.9169 4.94522 11.9354 4.78984 11.9354 4.6255V4.01295C11.9354 3.83366 11.9169 3.66334 11.8831 3.51095C11.8431 3.32271 11.7601 3.15836 11.6309 3.02091ZM10.5727 2.03785C10.5727 2.13048 10.5635 2.22311 10.545 2.30677C10.5358 2.35458 10.5112 2.39641 10.4712 2.43526C10.4404 2.46514 10.3727 2.51295 10.2374 2.55179C10.1113 2.59063 9.92672 2.60856 9.68986 2.60856H8.09646V0.80677H9.68986C10.2405 0.80677 10.385 0.92928 10.4158 0.965137C10.5204 1.08765 10.5727 1.24004 10.5727 1.4253V2.03785V2.03785ZM8.09646 3.30478H10.3481C10.8741 3.30478 11.0218 3.42131 11.0618 3.47211C11.1694 3.61255 11.2217 3.78585 11.2217 4.00996V4.62251C11.2217 4.80777 11.1756 4.94522 11.0802 5.04382C11.0587 5.06773 10.9141 5.18426 10.3389 5.18426H8.09646V3.30478Z" fill="#ffffff"></path>
                  <path d="M18.7666 3.02091C18.6466 2.89243 18.4805 2.79083 18.2775 2.71912C18.2837 2.70717 18.2898 2.69223 18.296 2.68028C18.379 2.48307 18.4221 2.26793 18.4221 2.03785V1.42828C18.4221 1.26394 18.4036 1.10856 18.3636 0.959161C18.3175 0.788842 18.2283 0.636452 18.0991 0.507966C17.973 0.37948 17.7976 0.280874 17.5792 0.212149C17.3762 0.146412 17.1271 0.116531 16.8256 0.116531H14.5186V5.87749H17.4747C17.7823 5.87749 18.0283 5.8506 18.2283 5.79382C18.4498 5.73107 18.6189 5.64442 18.7451 5.5249C18.8743 5.40538 18.9635 5.25597 19.0096 5.08864C19.0496 4.94522 19.0711 4.78984 19.0711 4.62251V4.00996C19.0711 3.83067 19.0527 3.66334 19.0188 3.50797C18.9788 3.32271 18.8927 3.15836 18.7666 3.02091ZM17.7084 2.03785C17.7084 2.13048 17.6992 2.22012 17.6807 2.30677C17.6715 2.35458 17.6469 2.39641 17.6069 2.43526C17.5762 2.46514 17.5085 2.50996 17.3731 2.55179C17.247 2.59063 17.0625 2.60856 16.8256 2.60856H15.2322V0.80677H16.8256C17.3762 0.80677 17.5208 0.92928 17.5516 0.965137C17.6561 1.09064 17.7084 1.24004 17.7084 1.4253V2.03785V2.03785ZM15.2322 3.30478H17.4839C18.0253 3.30478 18.1668 3.43326 18.1975 3.47211C18.3052 3.61255 18.3575 3.78585 18.3575 4.00996V4.62251C18.3575 4.80777 18.3113 4.94522 18.2129 5.04382C18.1914 5.06773 18.0499 5.18426 17.4716 5.18426H15.2291V3.30478H15.2322Z" fill="#ffffff"></path>
                  <path d="M23.8021 0C22.947 0 22.3687 0.143426 22.0334 0.433267C21.6919 0.729084 21.5166 1.11753 21.5166 1.58964V4.41036C21.5166 4.87948 21.6919 5.26793 22.0334 5.56673C22.3687 5.85956 22.95 6.00299 23.8021 6.00299C24.6542 6.00299 25.2356 5.86255 25.5801 5.56972C25.9308 5.2739 26.1092 4.88247 26.1092 4.41335V1.58964C26.1092 1.11753 25.9308 0.729084 25.5801 0.433267C25.2356 0.140438 24.6542 0 23.8021 0ZM23.8021 5.30677C22.9931 5.30677 22.6578 5.16633 22.5163 5.0498C22.3195 4.88546 22.2302 4.68227 22.2302 4.41036V1.58964C22.2302 1.32072 22.3256 1.11155 22.5163 0.950199C22.6578 0.833665 22.9931 0.693227 23.8021 0.693227C24.6111 0.693227 24.9556 0.833665 25.1002 0.953187C25.3002 1.11753 25.3955 1.32072 25.3955 1.58964V4.41036C25.3955 4.68227 25.3032 4.88247 25.1002 5.04681C24.9556 5.16633 24.6142 5.30677 23.8021 5.30677Z" fill="#ffffff"></path>
                  <path d="M28.251 0.113548V0.806775H30.2689V5.8745H30.9825V0.806775H33.0004V0.113548H28.251Z" fill="#ffffff"></path>
                </svg></a> <a href="/">Docs</a>
              </span>    </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="abbot-templating-language">Abbot Templating Language</h1>

<p>Inputs provided to Playbook Steps can be templates that will be rendered using the Abbot Templating Language, which is derived from <a href="https://handlebarsjs.com">Handlebars</a>.
Handlebars is a powerful templating language that allows you to use variables, conditionals, and loops to generate text.
Here, we'll focus on the basics and cover the variables that Abbot makes available to you, and how to use them.</p>
<h2 id="where-can-you-use-templates">Where can you use templates?</h2>
<p>Any Playbook step that accepts text input can include a template.
For example, the &quot;Message&quot; input for the &quot;Send Message&quot; step:</p>
<img width="332" alt="image" src="https://github.com/aseriousbiz/abbot-docs/assets/7574/33b923cd-33de-4aa1-9920-02a3e9cdb9e5">
<p>In addition, some drop-down inputs support pre-defined templates.
For example, the &quot;Channel&quot; input for the &quot;Send Message&quot; step supports &quot;Channel from Triggers&quot; which is a template that will be replaced with the channel that triggered the Playbook:</p>
<img width="290" alt="image" src="https://github.com/aseriousbiz/abbot-docs/assets/7574/808b0e25-03ee-43ef-af5c-5c9862e851d0">
<p>Other steps <em>only</em> support template values, such as the &quot;Condition&quot; in the &quot;Continue If&quot; step, which only allows a template from a predefined set of templates:</p>
<img width="295" alt="image" src="https://github.com/aseriousbiz/abbot-docs/assets/7574/b749b9f4-7b4c-445f-a447-94d01369dfb5">
<p>All of these are implemented with templates, though you only need to write templates when using free-form text inputs.</p>
<h2 id="handlebars-basics">Handlebars Basics</h2>
<p>Handlebars is a fairly simple templating language.
Most text is passed through unchanged, but you can use special syntax to insert variables.
Variables are surrounded by double curly braces, like <code>{{this}}</code>.</p>
<p>We provide a template &quot;context&quot;, which is a set of variables that you can use in your templates.
Many of these variables are objects that have their own properties, which you can access using dot notation.
For example <code>{{trigger.outputs.channel.name}}</code> will be replaced with the name of the channel that triggered the Playbook.</p>
<h2 id="template-context">Template Context</h2>
<p>The following variables are available in all templates:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trigger</code></td>
<td>Results from the trigger that started the Playbook.</td>
</tr>
<tr>
<td><code>previous</code></td>
<td>Results from the previous step.</td>
</tr>
<tr>
<td><code>outputs</code></td>
<td>A merged view of all the &quot;outputs&quot; from all previous steps. Outputs from later steps override outputs from earlier steps.</td>
</tr>
</tbody>
</table>
<h3 id="the-trigger-object">The <code>trigger</code> object</h3>
<p>The <code>trigger</code> variable is a &quot;Step Results&quot; object and has the following properties:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trigger.id</code></td>
<td>The ID of the trigger</td>
</tr>
<tr>
<td><code>trigger.outcome</code></td>
<td>The outcome of the trigger. Will always be <code>Succeeded</code>.</td>
</tr>
<tr>
<td><code>trigger.outputs</code></td>
<td>A table of output values from the trigger. The values in this table vary depending on the trigger.</td>
</tr>
</tbody>
</table>
<h3 id="the-previous-object">The <code>previous</code> object</h3>
<p>The <code>previous</code> variable is also &quot;Step Results&quot; object and has the following properties:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>previous.id</code></td>
<td>The ID of the previous step in the Playbook</td>
</tr>
<tr>
<td><code>previous.outcome</code></td>
<td>The outcome of the previous step in the Playbook. Will always be <code>Succeeded</code>.</td>
</tr>
<tr>
<td><code>previous.outputs</code></td>
<td>A table of output values from the previous step in the Playbook. The values in this table vary depending on the step.</td>
</tr>
</tbody>
</table>
<div class="NOTE">
<h5>Note</h5>
<p>For the first step in a Playbook, <code>previous</code> will be identical to the <code>trigger</code>.</p>
</div>
<h3 id="the-outputs-object">The <code>outputs</code> object</h3>
<p>The <code>outputs</code> variable is a table of all the outputs from all previous steps in the Playbook.
Unlike, say, <code>trigger.outputs</code> which is <strong>just</strong> the outputs from the trigger, or <code>previous.outputs</code> which is <strong>just</strong> the outputs from the previous step, this is a merged view of all <code>outputs</code> from all steps that have executed.
If a later step has an output with the same name as an earlier step, the later step's output will override the earlier step's output.</p>
<h2 id="some-examples">Some examples</h2>
<p>Here are some examples of triggers and steps and how you can use their outputs in templates.
This isn't a full reference of all the outputs available, but it gives a brief overview of what to expect.</p>
<h3 id="accessing-the-channel-that-triggered-the-playbook">Accessing the channel that triggered the Playbook</h3>
<p>If you use a trigger like &quot;Conversation Started&quot;, &quot;Reaction Added&quot;, &quot;Abbot Added to Channel&quot;, or other triggers that are caused by events related to Slack messages, the Slack channel in which that event occurred is available in the <code>trigger.outputs.channel</code> object.
That object has the following properties:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trigger.outputs.channel.id</code></td>
<td>The ID of the channel</td>
</tr>
<tr>
<td><code>trigger.outputs.channel.name</code></td>
<td>The name of the channel</td>
</tr>
</tbody>
</table>
<p>If you want to mention the Channel in a Slack message, use Slack's <a href="https://api.slack.com/reference/surfaces/formatting#linking-channels">linking syntax</a>:</p>
<pre><code>Hey everyone, we got a new customer. They're in &lt;#{{ trigger.outputs.channel.id }}&gt;!
</code></pre>
<h3 id="accessing-the-customer-that-triggered-the-playbook">Accessing the Customer that triggered the Playbook</h3>
<p>If you trigger a Playbook using the &quot;New Customer Created&quot; trigger, a <code>customer</code> output is available that contains information about the customer:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trigger.outputs.customer.name</code></td>
<td>The name of the customer</td>
</tr>
<tr>
<td><code>trigger.outputs.customer.segments</code></td>
<td>A list of the Segments the customer is in</td>
</tr>
<tr>
<td><code>trigger.outputs.customer.channels</code></td>
<td>A list of the Slack channels associated with the customer</td>
</tr>
</tbody>
</table>
<p>In addition, all of the channels associated with the customer are available in the <code>trigger.outputs.channels</code> object.
The <em>first</em> channel in the channel list is also available in the <code>trigger.outputs.channel</code> object, for convenience.</p>
<p>This allows you to send a message to a customer when you create their record in Abbot, for example:</p>
<img width="984" alt="image" src="https://github.com/aseriousbiz/abbot-docs/assets/7574/a4b8743c-77fc-4e66-9259-15c2f754c37e">
<p>The &quot;Channel from triggers&quot; here is equvalent to the template <code>trigger.outputs.channel.id</code>, so this will post a message to the first channel associated with the customer.
This example assumes you've assigned a channel to the customer when you created their record in Abbot.</p>
<p>There are also steps that <em>create</em> channels, such as &quot;Create Channel for Customer&quot;.
These make the channel they create available in the <code>outputs.channel</code> variable, so you can use that in subsequent steps:</p>
<img width="1093" alt="image" src="https://github.com/aseriousbiz/abbot-docs/assets/7574/9d08e2ae-6819-4083-9e44-ec3d228a4205">
<p>This example creates a new channel for the customer based on the prefix you specify and the name of the customer.
For example, given a Customer name of <code>Funny Business</code> and a prefix of <code>cust-</code>, the channel name will be <code>cust-funny-business</code>.
Then, in a subsequent step, you can use the <code>outputs.channel.id</code> template to mention the channel in a message.
The example Playbook above posts a mention of the newly created channel in the <code>#biz</code> channel.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
              <ul class="is-horizontal">
                <li>
                    <a href="https://ab.bot/"><img src="../templates/abbot/img/abbot-avatar-small.png" width="24" alt="Abbot robot logo"></a>
                    <span class="has-text-grey">© A Serious Business, Inc.</span>
                </li>
                <li><a href="https://ab.bot/about/policy/terms">Terms</a></li>
                <li><a href="https://ab.bot/about/policy/privacy">Privacy</a></li>
                <li><a href="/">Help</a></li>
                <li><a href="https://blog.ab.bot">Blog</a></li>
                <li><a href="https://ab.bot/plans">Plans</a></li>
                <li><a href="mailto:support@ab.bot">Contact Us</a></li>
              </ul>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
